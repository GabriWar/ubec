[
  {
    "id": "console_logger_function",
    "type": "function",
    "name": "ğŸ“‹ Console Logger - Full Payload",
    "func": "// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// ğŸ“‹ LOGGER DE PAYLOAD COMPLETA PARA INTEGRAÃ‡ÃƒO BACKEND\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nconst payload = msg.payload;\nconst timestamp = new Date().toISOString();\n\nconsole.log('\\n\\n');\nconsole.log('â•”' + 'â•'.repeat(78) + 'â•—');\nconsole.log('â•‘' + ' '.repeat(20) + 'ğŸ“‹ PAYLOAD COMPLETA PARA BACKEND' + ' '.repeat(26) + 'â•‘');\nconsole.log('â•š' + 'â•'.repeat(78) + 'â•');\nconsole.log('');\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// CABEÃ‡ALHO DA REQUISIÃ‡ÃƒO\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nconsole.log('â”Œâ”€ ğŸ“¡ HEADERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');\nconsole.log('â”‚');\nconsole.log('â”‚  POST /api/clp/telemetry');\nconsole.log('â”‚  Content-Type: application/json');\nconsole.log('â”‚  X-Device-ID: ' + payload.device_id);\nconsole.log('â”‚  X-Timestamp: ' + payload.timestamp);\nconsole.log('â”‚');\nconsole.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');\nconsole.log('');\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// PAYLOAD JSON COMPLETA\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nconsole.log('â”Œâ”€ ğŸ“¦ PAYLOAD JSON â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');\nconsole.log('â”‚');\n\n// Imprimir JSON formatado com indentaÃ§Ã£o\nconst jsonString = JSON.stringify(payload, null, 2);\nconst jsonLines = jsonString.split('\\n');\n\njsonLines.forEach(line => {\n    console.log('â”‚  ' + line);\n});\n\nconsole.log('â”‚');\nconsole.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');\nconsole.log('');\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// ESTRUTURA DETALHADA DOS DADOS\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nconsole.log('â”Œâ”€ ğŸ“Š ESTRUTURA DETALHADA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');\nconsole.log('â”‚');\nconsole.log('â”‚  ğŸ”‘ CAMPOS OBRIGATÃ“RIOS:');\nconsole.log('â”‚  â”œâ”€ device_id: string (ID Ãºnico do dispositivo)');\nconsole.log('â”‚  â”œâ”€ timestamp: string (ISO 8601 format)');\nconsole.log('â”‚  â”œâ”€ location: object');\nconsole.log('â”‚  â”‚   â”œâ”€ site: string');\nconsole.log('â”‚  â”‚   â””â”€ installation: string');\nconsole.log('â”‚  â”‚');\nconsole.log('â”‚  â”œâ”€ sensors: object');\nconsole.log('â”‚  â”‚   â””â”€ temperaturas: object');\nconsole.log('â”‚  â”‚       â”œâ”€ ambiente: {value: number, unit: string}');\nconsole.log('â”‚  â”‚       â”œâ”€ quadro_eletrico: {value: number, unit: string}');\nconsole.log('â”‚  â”‚       â”œâ”€ modulo_fotovoltaico: {value: number, unit: string}');\nconsole.log('â”‚  â”‚       â””â”€ transformador: {value: number, unit: string}');\nconsole.log('â”‚  â”‚');\nconsole.log('â”‚  â”œâ”€ status: object');\nconsole.log('â”‚  â”‚   â”œâ”€ outputs: object (10 booleanos)');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ comunicacao_ok: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ usina_gerando: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ falha: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ alarme: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ emergencia_inversores: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ reset_rasp: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ reset_link_3g: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ reserva_1: boolean');\nconsole.log('â”‚  â”‚   â”‚   â”œâ”€ reserva_2: boolean');\nconsole.log('â”‚  â”‚   â”‚   â””â”€ reserva_3: boolean');\nconsole.log('â”‚  â”‚   â”‚');\nconsole.log('â”‚  â”‚   â””â”€ inputs: object (14 booleanos)');\nconsole.log('â”‚  â”‚       â”œâ”€ dj_geral_aberto: boolean');\nconsole.log('â”‚  â”‚       â”œâ”€ dj_geral_fechado: boolean');\nconsole.log('â”‚  â”‚       â”œâ”€ reserva_i02 a i09: boolean (8 campos)');\nconsole.log('â”‚  â”‚       â”œâ”€ servico_auxiliar: boolean');\nconsole.log('â”‚  â”‚       â”œâ”€ botao_close: boolean');\nconsole.log('â”‚  â”‚       â”œâ”€ botao_trip: boolean');\nconsole.log('â”‚  â”‚       â””â”€ botao_emergencia: boolean');\nconsole.log('â”‚  â”‚');\nconsole.log('â”‚  â””â”€ alerts: array[object] (pode estar vazio)');\nconsole.log('â”‚      â””â”€ cada alert: {type: string, severity: string}');\nconsole.log('â”‚');\nconsole.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');\nconsole.log('');\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// VALORES ATUAIS\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nconsole.log('â”Œâ”€ ğŸ“ˆ VALORES ATUAIS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');\nconsole.log('â”‚');\nconsole.log('â”‚  ğŸŒ¡ï¸  TEMPERATURAS:');\n\nif (payload.sensors && payload.sensors.temperaturas) {\n    const temps = payload.sensors.temperaturas;\n    console.log('â”‚     â”œâ”€ Ambiente: ' + temps.ambiente.value + 'Â°C');\n    console.log('â”‚     â”œâ”€ Quadro ElÃ©trico: ' + temps.quadro_eletrico.value + 'Â°C');\n    console.log('â”‚     â”œâ”€ MÃ³dulo FV: ' + temps.modulo_fotovoltaico.value + 'Â°C');\n    console.log('â”‚     â””â”€ Transformador: ' + temps.transformador.value + 'Â°C');\n}\n\nconsole.log('â”‚');\nconsole.log('â”‚  ğŸ”´ OUTPUTS ATIVOS:');\n\nif (payload.status && payload.status.outputs) {\n    const outputs = payload.status.outputs;\n    const activeOutputs = Object.entries(outputs).filter(([k,v]) => v === true);\n    \n    if (activeOutputs.length > 0) {\n        activeOutputs.forEach(([key, val]) => {\n            console.log('â”‚     âœ“ ' + key);\n        });\n    } else {\n        console.log('â”‚     (nenhum ativo)');\n    }\n}\n\nconsole.log('â”‚');\nconsole.log('â”‚  ğŸ”µ INPUTS ATIVOS:');\n\nif (payload.status && payload.status.inputs) {\n    const inputs = payload.status.inputs;\n    const activeInputs = Object.entries(inputs).filter(([k,v]) => v === true);\n    \n    if (activeInputs.length > 0) {\n        activeInputs.forEach(([key, val]) => {\n            console.log('â”‚     âœ“ ' + key);\n        });\n    } else {\n        console.log('â”‚     (nenhum ativo)');\n    }\n}\n\nconsole.log('â”‚');\nconsole.log('â”‚  ğŸš¨ ALERTAS: ' + (payload.alerts ? payload.alerts.length : 0));\n\nif (payload.alerts && payload.alerts.length > 0) {\n    payload.alerts.forEach(alert => {\n        console.log('â”‚     [' + alert.severity.toUpperCase() + '] ' + alert.type);\n    });\n}\n\nconsole.log('â”‚');\nconsole.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');\nconsole.log('');\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// EXEMPLO DE CURL PARA TESTAR\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nconsole.log('â”Œâ”€ ğŸ§ª EXEMPLO DE CURL PARA TESTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');\nconsole.log('â”‚');\nconsole.log('â”‚  curl -X POST http://localhost:3001/api/clp/telemetry \\\\');\nconsole.log('â”‚    -H \"Content-Type: application/json\" \\\\');\nconsole.log('â”‚    -H \"X-Device-ID: ' + payload.device_id + '\" \\\\');\nconsole.log('â”‚    -H \"X-Timestamp: ' + payload.timestamp + '\" \\\\');\nconsole.log('â”‚    -d \\'' + JSON.stringify(payload).substring(0, 60) + '...\\'');\nconsole.log('â”‚');\nconsole.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');\nconsole.log('');\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// INSTRUÃ‡Ã•ES PARA BACKEND\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\nconsole.log('â”Œâ”€ ğŸ’¡ INSTRUÃ‡Ã•ES PARA BACKEND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”');\nconsole.log('â”‚');\nconsole.log('â”‚  1. Endpoint: POST /api/clp/telemetry');\nconsole.log('â”‚  2. Content-Type: application/json');\nconsole.log('â”‚  3. FrequÃªncia: A cada 30 segundos');\nconsole.log('â”‚  4. Campos sempre presentes:');\nconsole.log('â”‚     - device_id, timestamp, location, sensors, status, alerts');\nconsole.log('â”‚  5. Alertas podem estar vazios: alerts = []');\nconsole.log('â”‚  6. Todos os booleanos sempre presentes (true/false)');\nconsole.log('â”‚  7. Temperaturas sempre em Celsius');\nconsole.log('â”‚  8. Timestamp em ISO 8601 (UTC)');\nconsole.log('â”‚');\nconsole.log('â”‚  ğŸ“ Payload salva em: /home/gabriel/clp_data_backup.jsonl');\nconsole.log('â”‚  ğŸ“ Exemplo salvo em: /home/gabriel/payload_example.json');\nconsole.log('â”‚');\nconsole.log('â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜');\nconsole.log('');\n\nconsole.log('â•”' + 'â•'.repeat(78) + 'â•—');\nconsole.log('â•‘' + ' '.repeat(26) + 'âœ… LOG COMPLETO' + ' '.repeat(37) + 'â•‘');\nconsole.log('â•š' + 'â•'.repeat(78) + 'â•');\nconsole.log('\\n\\n');\n\nreturn msg;",
    "outputs": 1,
    "noerr": 0,
    "initialize": "",
    "finalize": "",
    "libs": []
  }
]

